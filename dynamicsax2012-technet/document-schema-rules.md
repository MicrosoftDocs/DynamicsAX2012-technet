---
title: Document Schema Rules
TOCTitle: Document Schema Rules
ms:assetid: 38458b10-5803-4320-89cc-0db6076f0e41
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Aa636469(v=AX.60)
ms:contentKeyID: 35242832
ms.date: 11/07/2012
mtps_version: v=AX.60
dev_langs:
- xml
---

# Document Schema Rules 


_**Applies To:** Microsoft Dynamics AX 2012 R2, Microsoft Dynamics AX 2012 Feature Pack, Microsoft Dynamics AX 2012_

This topic describes the schema rules and conventions for the document schemas in Application Integration Framework (AIF). Each document in AIF has a schema that defines the structure and format of the XML that the document can serialize and deserialize. This is called the document XML Schema Definition (XSD) or the schema. The document schema defines the structure and format for all possible fields in the document.


> [!NOTE]
> <P>When you create an integration port for an exchange, you can enable different fields per document. You can set the fields on the <STRONG>Data policies</STRONG> form. For more information, see <A href="customize-service-contracts.md">Customize service contracts</A>.</P>



## Document XSD

In AIF, the schema for each document is generated by iterating through the query associated with the document class. For example, the PurchPurchReqService document service class is associated with document class AxdPurchaseRequisition and a query by the same name. The data source for this query contains multiple nested tables with the VendPurchOrderJour table at the parent level.

When an XML document is sent or received in AIF, the XML can be validated against the document schema. Microsoft Dynamics AX generates the schema internally by calling the getSchema method from the document data object as shown in the following diagram. The getSchema method is not overridden by the document object so the call is passed on to the base class AfStronglyTypedDataContainer which implements the AifXmlSerializable interface.


> [!WARNING]
> <P>The getSchema method is not overridden by default.</P>



![Getting the Document Schema](images/Aa636469.GetSchema(AX.60).gif "Getting the Document Schema")

**The classes AIF uses to build the document schema**

The document schema is generated directly from the document query. During schema generation, if an Ax \<Table\> class exists for a table in the query, the elements in the schema that represent the source table fields are built from that Ax \<Table\> class; otherwise, the elements are built from the source table referenced in the query. For more information about generating a document schema (.xsd) file, see [How to: Generate a Document Schema](how-to-generate-a-document-schema.md).

## XSD Naming Conventions

The following table shows the conventions used by AIF when naming schema elements. These conventions are used to ensure that none of the schema element names conflict with other names like the document name, query name, and so on.

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Element prefix</p></th>
<th><p>Element type</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;none&gt;</p></td>
<td><p>Document</p></td>
<td><p>None</p></td>
</tr>
<tr class="even">
<td><p>AxdEntity_</p></td>
<td><p>Data source</p></td>
<td><p>A complexType element is generated for each data source in the query. In the schema, each data source name must be unique so the name is prefixed by &quot;AxdEntity_&quot;, for example, AxdEntity_&lt;DS_Name&gt;.</p></td>
</tr>
<tr class="odd">
<td><p>AxdExtType_</p></td>
<td><p>Extended data types</p></td>
<td><p>An &lt;xsd:simpleType&gt; element is generated for each field or property of an extended data type that is to be included in the XML document if that field or property is not derived from a Container X++ data type. The name of the generated &lt;xsd:simpleType&gt; is the name of the extended data type prefixed with &quot;AxdExtType_&quot;, for example AxdExtType_RecVersion.</p></td>
</tr>
<tr class="even">
<td><p>AxdUnion_</p></td>
<td><p>Unions</p></td>
<td><p>If the extended data type, for which a &lt;xsd:simpleType&gt; element is being created, is subject to value mapping, then the field element will reference an &lt;xsd:union&gt; between the data type of the field and the type representing the external values. This element is a union between the data type of the value mapped field and the type representing the external values, as shown in the following schema XML.</p>

```XML
<xsd:simpleType  name="AxdUnion_AxdExtType_<ExtendedDataTypeName>_AxdType_ExtCodeValue">
    <xsd:union memberTypes="AxdExtType_<ExtendedDataTypeName>AxdType_ExtCodeValue" />
</xsd:simpleType>
```

</td>
</tr>
<tr class="odd">
<td><p>AxdArray_</p></td>
<td><p>Arrays</p></td>
<td><p>A schema element is created for each field or property of an extended data type that is to be included in the XML document if that field or property is not derived from a Container X++ data type and has an ArrayLength greater than 1. This element has the format AxdArray_AxdExtType_&lt;ExtendedDataTypeName&gt;.</p></td>
</tr>
<tr class="even">
<td><p>AxdEnum_</p></td>
<td><p>Enumerations</p></td>
<td><p>An &lt;xsd:simpleType&gt; element is generated for each field or property of an enumerated data type that is to be included in the XML document. The name of the generated &lt;xsd:simpleType&gt; is the name of the enumerated data type prefixed with &quot;AxdEnumType_&quot;, for example AxdEnum_&lt;DataType&gt;.</p></td>
</tr>
<tr class="odd">
<td><p>AxdEntityKey_</p></td>
<td><p>Surrogate key</p></td>
<td><p>A schema element is generated for each reference data source that is used by each data source in the query. The element has the form AxdEntityKey_&lt;DataSourceName_ReferenceDataSourceName&gt;. For more information, see <a href="https://technet.microsoft.com/en-us/library/hh812105(v=ax.60)">Table Keys: Surrogate, Alternate, Replacement, Primary, and Foreign</a>.</p></td>
</tr>
</tbody>
</table>


## Mapping Data Types

In a document schema, the following X++ data types are mapped to their corresponding XSD types.

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>X++ data type</p></th>
<th><p>XSD type</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>string</p></td>
<td><p>xsd:string, maxLength=StringSize</p>
<p>(maxLength=max(StringSize,50) in case of value mapping)</p></td>
</tr>
<tr class="even">
<td><p>integer</p></td>
<td><p>xsd:int</p></td>
</tr>
<tr class="odd">
<td><p>timeOfDay</p></td>
<td><p>xsd:time, ISO format: HH:MM:SS</p>
<p>(Time stamp if global::isTypeTime is true)</p></td>
</tr>
<tr class="even">
<td><p>int64</p></td>
<td><p>xsd:long</p></td>
</tr>
<tr class="odd">
<td><p>real</p></td>
<td><p>xsd:decimal, fractionDigits=NoOfDecimals</p></td>
</tr>
<tr class="even">
<td><p>date</p></td>
<td><p>xsd:date, ISO format: YYYY-MM-DD</p></td>
</tr>
<tr class="odd">
<td><p>utcdatetime</p></td>
<td><p>xsd:datetime</p></td>
</tr>
<tr class="even">
<td><p>enum</p></td>
<td><p>xsd:string, enumeration=&lt;EnumName&gt;, ...</p></td>
</tr>
<tr class="odd">
<td><p>GUID</p></td>
<td><p>xsd:string, pattern=’[0-9A-Fa-f]{8}-...’</p></td>
</tr>
<tr class="even">
<td><p>BLOB</p></td>
<td><p>xsd:string, Base64 encoded</p></td>
</tr>
</tbody>
</table>



> [!NOTE]
> <P>The schemas in AIF are strongly typed. Incorrect data types will cause an error during schema validation. This enables errors to be captured as early as possible in an exchange.</P>



## Other Data Considerations

### Null Values

#### Outbound Null Values

Null values are not serialized for outbound documents. Arrays can contain empty elements and will be serialized.

#### Inbound Null Values

Empty string elements are interpreted as zero-length strings and not null values when processing an inbound document.

Use \<element xsi:nil="true"/\> to specify a null value.

### Time Values

When .NET serializes time values to XML, it includes fractional seconds and an offset. For example, .NET could create an XML element like the following:

\<AxTime\>23:18:29.8108671-08:00\</AxTime\>

AIF will accept an XML time value in this format. However, when it deserializes a time value, the fractional seconds and offset are truncated and the value will contain hours, minutes, and seconds (hh:mm:ss). AIF deserializes the previous time value to the following:

\<AxTime\>23:18:29\</AxTime\>


> [!NOTE]
> <P>AIF does not support the timespan type in .NET data contracts. If you create a data contract class with a timespan data member and attempt to consume the service, you will receive an error message containing information resembling “The InnerException message was 'There was an error deserializing the object of type DotNetDataContractsAssembly.NonPrimitiveTypes.NonPrimitiveTypesDataContractClass. The value '01:02:03' cannot be parsed as the type 'TimeSpan'.'.”.</P>



### Time Zone Values

Some documents contain time zone elements. The schema time zone values correspond to the time zone values in the time zone system enum. For more information, see [Timezone Enumeration](https://technet.microsoft.com/en-us/library/gg848856\(v=ax.60\)) and [Time Zone Overview and Terminology](https://technet.microsoft.com/en-us/library/cc518263\(v=ax.60\)).

The valid time zone values are specified in the document schema as shown in the following XML.

``` xml
<xs:simpleType name="AxdEnum_Timezone">
    <xs:annotation>
        <xs:documentation xml:lang="EN-US">:</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
        <xs:enumeration value="GMTMINUS1200INTERNATIONALDATELINEWEST"/>
        <xs:enumeration value="GMTMINUS1100MIDWAYISLAND_SAMOA"/>
        <xs:enumeration value="GMTMINUS1000HAWAII"/>
        <xs:enumeration value="GMTMINUS0900ALASKA"/>
        <xs:enumeration value="GMTMINUS0800PACIFICTIME"/>
        <xs:enumeration value="GMTMINUS0800TIJUANA_BAJACALIFORNIA"/>
        <xs:enumeration value="GMTMINUS0700ARIZONA"/>
        <xs:enumeration value="GMTMINUS0700MOUNTAINTIME"/>
        <xs:enumeration value="GMTMINUS0700CHIHUAHUA_LAPAZ_MAZATLAN"/>
        <xs:enumeration value="GMTMINUS0600CENTRALAMERICA"/>
        <xs:enumeration value="GMTMINUS0600CENTRALTIME"/>
        <xs:enumeration value="GMTMINUS0600GUADALAJARA_MEXICOCITY"/>
        <xs:enumeration value="GMTMINUS0600SASKATCHEWAN"/>
        <xs:enumeration value="GMTMINUS0500BOGOTA_LIMA_QUITO_
            RIOBRANCO"/>
        <xs:enumeration value="GMTMINUS0500EASTERNTIME"/>
        <xs:enumeration value="GMTMINUS0500INDIANA"/>
        <xs:enumeration value="GMTMINUS0400ATLANTICTIME"/>
        <xs:enumeration value="GMTMINUS0400CARACAS_LAPAZ"/>
        <xs:enumeration value="GMTMINUS0400MANAUS"/>
        <xs:enumeration value="GMTMINUS0400SANTIAGO"/>
        <xs:enumeration value="GMTMINUS0330NEWFOUNDLAND"/>
        <xs:enumeration value="GMTMINUS0300BRASILIA"/>
        <xs:enumeration value="GMTMINUS0300BUENOSAIRES_GEORGETOWN"/>
        <xs:enumeration value="GMTMINUS0300GREENLAND"/>
        <xs:enumeration value="GMTMINUS0300MONTEVIDEO"/>
        <xs:enumeration value="GMTMINUS0200MIDATLANTIC"/>
        <xs:enumeration value="GMTMINUS0100AZORES"/>
        <xs:enumeration value="GMTMINUS0100CAPEVERDIS"/>
        <xs:enumeration value="GMT_CASABLANCA_MONTROVIA_REYKJAVIK"/>
        <xs:enumeration value="GMT_DUBLIN_EDINBURGH_LISBON_LONDON"/>
        <xs:enumeration value="GMTPLUS0100_AMSTERDAM_BERLIN_BERN_
            ROME"/>
        <xs:enumeration value="GMTPLUS0100BELGRADE_BRATISLAVA_
            BUDAPEST"/>
        <xs:enumeration value="GMTPLUS0100BRUSSELS_COPENHAGEN_
            MADRID"/>
        <xs:enumeration value="GMTPLUS0100SARAJEVO_SKOPJE_WARSAW_
            ZAGREB"/>
        <xs:enumeration value="GMTPLUS0100WESTCENTRALAFRICA"/>
        <xs:enumeration value="GMTPLUS0200AMMAN"/>
        <xs:enumeration value="GMTPLUS0200ATHENS_BUCHAREST_ISTANBUL"/>
        <xs:enumeration value="GMTPLUS0200BEIRUT"/>
        <xs:enumeration value="GMTPLUS0200MINSK"/>
        <xs:enumeration value="GMTPLUS0200CAIRO"/>
        <xs:enumeration value="GMTPLUS0200HARARE_PRETORIA"/>
        <xs:enumeration value="GMTPLUS0200HELSINKI_KYIV_RIGA_VILNIUS"/>
        <xs:enumeration value="GMTPLUS0200JERUSALEM"/>
        <xs:enumeration value="GMTPLUS0200WINDHOEK"/>
        <xs:enumeration value="GMTPLUS0300BAGHDAD"/>
        <xs:enumeration value="GMTPLUS0300KUWAIT_RIYADH"/>
        <xs:enumeration value="GMTPLUS0300MOSCOW_STPETERSBURG_
            VOLGOGRAD"/>
        <xs:enumeration value="GMTPLUS0300NAIROBI"/>
        <xs:enumeration value="GMTPLUS0300TBILISI"/>
        <xs:enumeration value="GMTPLUS0330TEHRAN"/>
        <xs:enumeration value="GMTPLUS0400ABUDHABI_MUSCAT"/>
        <xs:enumeration value="GMTPLUS0400BAKU"/>
        <xs:enumeration value="GMTPLUS0400YEREVAN"/>
        <xs:enumeration value="GMTPLUS0430KABUL"/>
        <xs:enumeration value="GMTPLUS0500EKATERINBURG"/>
        <xs:enumeration value="GMTPLUS0500ISLAMABAD_KARACHI_TASHKENT"/>
        <xs:enumeration value="GMTPLUS0530CHENNAI_KOLKATA_MUMBAI"/>
        <xs:enumeration value="GMTPLUS0530SRIJAYAWARDENEPURA"/>
        <xs:enumeration value="GMTPLUS0545KATHMANDU"/>
        <xs:enumeration value="GMTPLUS0600ALMATY_NOVOSIBIRSK"/>
        <xs:enumeration value="GMTPLUS0600ASTANA_DHAKA"/>
        <xs:enumeration value="GMTPLUS0630_YANGON"/>
        <xs:enumeration value="GMTPLUS0700_BANGKOK_HANOI_JAKARTA"/>
        <xs:enumeration value="GMTPLUS0700KRASNOYARSK"/>
        <xs:enumeration value="GMTPLUS0800BEIJING_CHONGQING_HONGKONG"/>
        <xs:enumeration value="GMTPLUS0800IRKUTSK_ULAANBATAAR"/>
        <xs:enumeration value="GMTPLUS0800KUALALUMPUR_SINGAPORE"/>
        <xs:enumeration value="GMTPLUS0800PERTH"/>
        <xs:enumeration value="GMTPLUS0800TAIPEI"/>
        <xs:enumeration value="GMTPLUS0900OSAKA_SAPPORO_TOKYO"/>
        <xs:enumeration value="GMTPLUS0900SEOUL"/>
        <xs:enumeration value="GMTPLUS0900YAKUTSK"/>
        <xs:enumeration value="GMTPLUS0930ADELAIDE"/>
        <xs:enumeration value="GMTPLUS0930DARWIN"/>
        <xs:enumeration value="GMTPLUS1000BRISBANE"/>
        <xs:enumeration value="GMTPLUS1000CANBERRA_MELBOURNE_SYDNEY"/>
        <xs:enumeration value="GMTPLUS1000GUAM_PORTMORESBY"/>
        <xs:enumeration value="GMTPLUS1000HOBART"/>
        <xs:enumeration value="GMTPLUS1000VLADIVOSTOK"/>
        <xs:enumeration value="GMTPLUS1100MAGADAN_SOLOMONIS"/>
        <xs:enumeration value="GMTPLUS1200AUCKLAND_WELLINGTON"/>
        <xs:enumeration value="GMTPLUS1200FIJI_KAMCHATKA_MARSHALLIS"/>
        <xs:enumeration value="GMTPLUS1300NUKU_ALOFA"/>
    </xs:restriction>
</xs:simpleType>
```

## See also

[Document Schemas](document-schemas.md)

[How to: Generate a Document Schema](how-to-generate-a-document-schema.md)

[Document XML Generation](document-xml-generation.md)

